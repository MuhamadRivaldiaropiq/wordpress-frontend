import{A as O,j as P,r as i,l as V,o as F,a as l,b as f,c as k,w as o,d as t,B as N,g as A,t as g,y as E,e as d,q as x,F as I,C as T,f as W,s as q,p as z,_ as R,u as U}from"./index-65396532.js";import{u as G}from"./article-085c6e4a.js";import{w as H}from"./wordpress-82a6812a.js";import{a as J}from"./axiosWp-5be38e33.js";import{L as K}from"./index-a9558cb2.js";const Q=O({id:"publish",state:()=>({articles:[],loading:!1,error:null}),getters:{allArticle:a=>a.articles,isLoading:a=>a.loading,getError:a=>a.error},actions:{async addArticles(a,r,s,c,u){s.value=!0,await J.post(`${c}/wp-json/wp/v2/posts`,a,{headers:{Authorization:`Bearer ${u}`}}).then(e=>{s.value=!1,this.articles.push(e.data),console.log(e)}).catch(e=>{if(console.log(e),e.response&&e.response.status===422)r.value=Object.values(e.response.data.code).flat();else if(e.response&&e.response.status===403)r.value=Object.values([e.response.data.code]).flat();else throw e;s.value=!1})}}}),X=d("div",{class:"p-3 flex justify-end"},[d("button",{type:"submit",class:"px-5 py-1 bg-secondary-3 rounded hover:bg-opacity-90"},"Submit")],-1),Y={class:"flex items-center gap-3"},Z=["value"],ee={for:"input-{{ item.id }}"},te={__name:"PublishArticle",props:{item:Object},setup(a){const r=Q(),s=H();P();const c=i([]),u=i(!1),e=i([]);V(()=>e.value);const _=a,w=async()=>{const n=new FormData;n.append("title",_.item.title),n.append("content",_.item.content),n.append("status","publish");for(const p of c.value)await r.addArticles(n,e,u,p.domain,p.token);u.value=!1,v()},m=i([]);F(async()=>{v()});const v=async()=>{await s.getWordpress(),m.value=s.wordpress};return(n,p)=>{const y=l("v-btn"),S=l("v-form"),B=l("v-card-text"),C=l("v-spacer"),D=l("v-card-actions"),j=l("v-card"),$=l("v-dialog");return f(),k($,{"max-width":"500"},{activator:o(({props:h})=>[t(y,N(h,{color:"surface-variant",text:"Publish",variant:"flat"}),null,16)]),default:o(({isActive:h})=>[t(j,{title:"Dialog"},{default:o(()=>[A(g(_.item)+" ",1),t(B,null,{default:o(()=>[t(S,{onSubmit:E(w,["prevent"])},{default:o(()=>[X,d("ul",null,[(f(!0),x(I,null,T(m.value,(b,L)=>(f(),x("li",{key:L},[d("div",Y,[W(d("input",{type:"checkbox",value:b,"onUpdate:modelValue":p[0]||(p[0]=M=>c.value=M),id:"input-{{ item.id }}",class:"rounded-full"},null,8,Z),[[q,c.value]]),d("label",ee,g(b.domain),1)])]))),128))])]),_:1})]),_:1}),t(D,null,{default:o(()=>[t(C),t(y,{text:"Close Dialog",onClick:b=>h.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})}}},ce={__name:"index",setup(a){const r=G(),s=i(!1),c=i([]);i([]),z(()=>{u()});const u=async()=>{s.value=!0,await r.getArticle(),c.value=r.articles,s.value=!1},e=[{key:"id",title:"Id"},{key:"title",title:"Title"},{key:"status",title:"Status"}];return i([]),(_,w)=>{const m=l("v-data-table"),v=l("v-container");return f(),k(R,{title:"Semua Article"},{default:o(()=>[t(v,null,{default:o(()=>[t(U(K),{active:s.value,"is-full-page":!0},null,8,["active"]),t(m,{items:c.value,headers:e},{"item.action":o(({item:n})=>[t(te,{item:n},null,8,["item"])]),"item.Stats":o(({item:n})=>[A(g(n.wordpress.domain),1)]),_:2},1032,["items"])]),_:1})]),_:1})}}};export{ce as default};
